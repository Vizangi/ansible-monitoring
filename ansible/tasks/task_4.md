# Ansible

## Task 4

_Для подобного рода задач заводится таска в Jira (вкратце в описании описывается план проведения работ, выставляется время проведения работ, указывается исполнитель и ответственный), прикладывается документация в формате `.docx`, где прописано построчно, что будет происходить, и что делать в случае сбоя (откат). То есть вот вам еще одна строчка в резюме - придумайте, как её красиво расписать._

### Пишем пайплайн

#### Автоматизируем деплой стека мониторинга на три контура разработки по x8 контейнеров (на рабочем проекте в облаке - это будут инстансы)

- На данном этапе мы наблюдаем наглядное представление **Terraform IaC** с развертыванием инфраструктуры и управлением, как кодом + **Ansible IaC** с развертыванием конфигурации и управлением, как кодом.
- Возьмите в работу плейбук [monitoring_project](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/tasks/monitoring_project/playbook.yml) (в комментариях YAML подсказка):
  - Возьмите в работу **Docker**:
    - С помощью **Terraform** уже нарезано три контура по 8 инстансов в каждом [в задании 4](https://github.com/lamjob1993/terraform-monitoring/blob/main/terraform/tasks/task_4.md) по репозиторию **Terraform**.
    - В каждом контейнере должен быть установлен клиент **openssh**, так как в основе работы **Ansible** лежит **ssh**.
    - А также нужно подумать, что делать с `systemd` в контейнере, как запустить контейнер с его принудительной поддержкой.
  - Напишите основной плейбук, наполните файл [инвентори](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/tasks/monitoring_project/inventory.ini) и напишите роли на стек мониторинга из [плейбука](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/tasks/monitoring_project/playbook.yml).
  - Выведите получившуюся картину на дашборды:
    - Дашборды использовать официальные (они у вас уже были скачаны по [Docker репозиторию](https://github.com/lamjob1993/docker-monitoring/blob/main/docker/task_4.md)).
    - На каждый уникальный инстанс вывести уникальный и официальный дашборд.
  - Запушьте изменения в **GitHub**.
