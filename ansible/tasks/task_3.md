# Ansible

## Task 3

_Для подобного рода задач заводится таска в Jira (вкратце в описании описывается план проведения работ, выставляется время проведения работ, указывается исполнитель и ответственный), прикладывается документация в формате `.docx`, где прописано построчно, что будет происходить, и что делать в случае сбоя (откат). То есть вот вам еще одна строчка в резюме - придумайте, как её красиво расписать._

### Автоматизируем деплой стека мониторинга на x8 контейнеров (на рабочем проекте это будут VM-ки)

- На данном этапе мы наблюдаем наглядное представление **Terraform IaC** с развертыванием инфраструктуры и управлением, как кодом + **Ansible IaC** с развертыванием конфигурации и управлением, как кодом. 
- На реальной работе в **`DEV-TEST-PROD`** контурах у вас будут настоящие CentOS виртуалки, поэтому не пугаемся, мы берем **Docker** в работу, так как он колоссально экономит ресурсы и в состоянии буквально за секунды развернуть хоть 10, хоть 50 контейнеров (но в голове держим, что это стандартные VM-ки).

- Возьмите в работу плейбук [monitoring_project](https://github.com/lamjob1993/ansible-monitoring/tree/main/ansible/tasks/monitoring_project) (в комментариях в YAML подсказка):
  - Возьмите в работу **Docker**:
    - С помощью **Terraform** нарежьте 8 чистых (пустых) контейнеров с помощью **Docker** (в каждом контейнере должен быть установлен клиент **openssh**, так как в основе работы **Ansible** лежит **ssh**)
  - Напишите [основной плейбук](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/tasks/monitoring_project/playbook.yml), наполните файл [инвентори](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/tasks/monitoring_project/inventory.ini) и роли на стек ниже и задеплойте:
  - Выведите получившуюся картину на дашборды:
    - Дашборды использовать официальные (они у вас уже были скачаны по [Docker репозиторию](https://github.com/lamjob1993/docker-monitoring/blob/main/docker/task_4.md))
    - На каждый уникальный инстанс вывести уникальный и официальный дашборд
  - Запушьте изменения в GitHub
- **Еще раз повторюсь**, мы тут запускаем контейнеры, как будто бы это VM-ки. Это означает, что по реальным рабочим задачам этим заниматься не нужно будет, мы просто экономим наше время, чтобы понять принцип работы Ansible, как IaC.
  - Мы не поднимаем x8 CentOS в цикле Terraform, это займет колоссальное количество времени и ресурсов, в то время, как подъем контейнеров - это секунды.
