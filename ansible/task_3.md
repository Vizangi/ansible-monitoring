# Ansible

## Task 3

### Автоматизируем деплой стека мониторинга на x8 контейнеров

- На данном этапе мы наблюдаем наглядное представление **Terraform IaC** с развертыванием и управлением инфраструктуры, как кодом + **Ansible IaC** с развертыванием и управлением конфигурацией, как кодом. 
- На реальной работе в **`DEV-TEST-PROD`** контурах у вас будут настоящие CentOS виртуалки, поэтому не пугаемся, мы берем Podman в работу, так как он почти не жрёт ресурсы и в состоянии буквально за секунды развернуть хоть 10, хоть 20 контейнеров (но в голове держим, что это стандартные VM-ки).

- Возьмите в работу плейбук [monitoring_project](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/monitoring_project/playbook.yml) (в комментариях в YAML подсказка):
  - Возьмите в работу **Podman** + **Docker**:
    - С помощью **Terraform** нарежьте 8 чистых (пустых) контейнеров
  - Напишите [основной плейбук](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/monitoring_project/playbook.yml), наполните файл [инвентори](https://github.com/lamjob1993/ansible-monitoring/blob/main/ansible/monitoring_project/inventory.ini) и роли на стек ниже и задеплойте:
    - Grafana, Prometheus, Alertmanager, Nginx и PostgreSQL должны быть развернуты через **Podman на пяти отдельных контейнерах**
    - Process Exporter, Node Exporter и Blackbox Exporter должны быть развернуты через **Docker на трех отдельных контейнерах**
  - Выведите получившуюся картину на дашборды:
    - Дашборды использовать официальные (они у вас уже были скачаны по [Docker репозиторию](https://github.com/lamjob1993/docker-monitoring/blob/main/docker/task_4.md))
    - На каждый уникальный инстанс вывести уникальный и официальный дашборд
  - Запушьте изменения в GitHub
- **Еще раз повторюсь**, мы тут запускаем контейнеры, как будто бы это VM-ки. Это означает, что по реальным рабочим задачам этим заниматься не нужно будет, мы просто экономим наше время, чтобы понять принцип работы Ansible, как IaC.
  - Мы не поднимаем x8 CentOS в цикле Terraform, это займет колоссальное количество времени и ресурсов, в то время, как подъем контейнеров - это секунды.
